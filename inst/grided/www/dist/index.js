parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"E1cz":[function(require,module,exports) {
"use strict";var t,e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function r(t,e){return t+" / "+(e=e?e+1:t+(t<0?-1:1))}function o(t,e){e.start_row&&(t.style.gridRow=r(e.start_row,e.end_row)),e.start_col&&(t.style.gridColumn=r(e.start_col,e.end_col)),t.style.display="block"}function n(t){return s(t," ")}function s(t,e){return void 0===e&&(e=" "),t.reduce(function(t,r,o){return t+(o>0?e:"")+r},"")}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(t,"\n")}function _(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(t," ")}function p(t){return t instanceof Array?t:[t]}function a(t,e,r){return e?t(e,r):r}function c(t,e){return a(Math.min,t,e)}function f(t,e){return a(Math.max,t,e)}function u(t){if(null===t.offsetParent)return null;var e=t.offsetTop,r=t.offsetLeft,o=t.offsetHeight;return{left:r,right:r+t.offsetWidth,top:e,bottom:e+o}}function l(t,e){var r=n([t.left,t.right],[e.left,e.right]),o=n([t.top,t.bottom],[e.top,e.bottom]);return r&&o;function n(t,e){var r=t[0],o=t[1],n=e[0],s=e[1];return r>=n&&r<=s||o>=n&&o<=s||r<=n&&o>=s}}function x(r,o,n){var s=e({},r);if(n===t.top_left?(s.left=s.left+o.x,s.top=s.top+o.y):n===t.bottom_right?(s.right=s.right+o.x,s.left,s.bottom=s.bottom+o.y,s.top):(s.left+=o.x,s.top+=o.y,s.right+=o.x,s.bottom+=o.y),s.left>s.right){var i=s.left,_=s.right;s.right=i,s.left=_}if(s.top>s.bottom){var p=s.top,a=s.bottom;s.bottom=p,s.top=a}return s}function g(t){return t.match(/[^ \d | \.]+$/g)[0]||"px"}function m(t){return Number(t.match(/^[\d | \.]+/g)[0])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.get_css_value=exports.get_css_unit=exports.update_rect_with_delta=exports.boxes_overlap=exports.get_bounding_rect=exports.max_w_missing=exports.min_w_missing=exports.compare_w_missing=exports.as_array=exports.concat_sp=exports.concat_nl=exports.concat=exports.sizes_to_template_def=exports.set_element_in_grid=exports.make_template_start_end=exports.Drag_Type=void 0,function(t){t.top_left="top-left",t.bottom_right="bottom-right",t.center="center"}(t=exports.Drag_Type||(exports.Drag_Type={})),exports.make_template_start_end=r,exports.set_element_in_grid=o,exports.sizes_to_template_def=n,exports.concat=s,exports.concat_nl=i,exports.concat_sp=_,exports.as_array=p,exports.compare_w_missing=a,exports.min_w_missing=c,exports.max_w_missing=f,exports.get_bounding_rect=u,exports.boxes_overlap=l,exports.update_rect_with_delta=x,exports.get_css_unit=g,exports.get_css_value=m;
},{}],"DCtb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.remove_elements=exports.make_el=void 0;var e=require("./misc-helpers");function t(t,r,n){void 0===n&&(n={});var s=r.match(/^([^#\.]+)+/g)[0],o=r.match(/(?<=#)([^\.]+)/g),a=r.match(/(?<=\.)([^\.#]+)/g),i=t.querySelector(r);return i||(i=document.createElement(s),o&&(i.id=o[0]),a&&a.forEach(function(e){return i.classList.add(e)}),n.props&&Object.assign(i,n.props),t.appendChild(i)),n.event_listener&&e.as_array(n.event_listener).forEach(function(e){return i["on"+e.event]=e.func}),n.styles&&Object.assign(i.style,n.styles),n.innerHTML&&(i.innerHTML=n.innerHTML),n.data_props&&Object.assign(i.dataset,n.data_props),n.grid_pos&&e.set_element_in_grid(i,n.grid_pos),i}function r(e){e.forEach(function(e){return e.remove()})}exports.make_el=t,exports.remove_elements=r;
},{"./misc-helpers":"E1cz"}],"kHB8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.draw_browser_header=void 0;var e=require("./index");function n(){var n=document.getElementById("editor-browser-header"),r=n.getBoundingClientRect(),t=r.width,i=r.height;n.innerHTML="";for(var x=i/4.5,o=1;o<=3;o++)n.innerHTML+="\n    <circle cx="+o*x*3+"px\n            cy = 50%\n            r = "+x+"px\n    > </circle>";var p=4*x*3,c=.65*i,d=(i-c)/2;n.innerHTML+="\n  <rect x = "+p+"px\n        y = "+d+"px\n        width = "+(t-p-10)+"px\n        height = "+.65*i+'px\n        stroke = "black"\n        stroke-width: 3px\n        fill = "none"\n        rx = '+c/2+"px\n        ry = "+c/2+"px\n  ></rect>";var a=e.Shiny?"www.myShinyApp.com":"www.myGridApp.com";n.innerHTML+="\n  <text x = "+(p+13)+"px\n        y = "+i/2+'px\n        alignment-baseline = "central"\n  >\n    '+a+"\n  </text>\n"}exports.draw_browser_header=n;
},{"./index":"QCba"}],"drsR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minus_icon=exports.plus_icon=exports.drag_icon=exports.top_left_arrow=exports.nw_arrow=exports.se_arrow=exports.bottom_right_arrow=exports.trashcan_icon=exports.horizontal_drag_icon=exports.vertical_drag_icon=void 0,exports.vertical_drag_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M21 11H3V9H21V11M21 13H3V15H21V13Z" />\n</svg>',exports.horizontal_drag_icon='<svg style="width:24px;height:24px;max-height:100%;" viewBox="0 0 24 24">\n<path fill="currentColor" d="M11 21H9V3H11V21M15 3H13V21H15V3Z" />\n</svg>',exports.trashcan_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />\n</svg>',exports.bottom_right_arrow='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M5,6.41L6.41,5L17,15.59V9H19V19H9V17H15.59L5,6.41Z" />\n</svg>',exports.se_arrow='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M5,6.41L6.41,5L17,15.59V9H19V19H9V17H15.59L5,6.41Z" />\n</svg>',exports.nw_arrow='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M19,17.59L17.59,19L7,8.41V15H5V5H15V7H8.41L19,17.59Z" />\n</svg>',exports.top_left_arrow='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M5,6.41L6.41,5L17,15.59V9H19V19H9V17H15.59L5,6.41Z" />\n</svg>',exports.drag_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z" />\n</svg>',exports.plus_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />\n</svg>',exports.minus_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M19,13H5V11H19V13Z" />\n</svg>';
},{}],"qudk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.make_incrementer=void 0;var e=require("./icons"),n=require("./make_el");function i(i){var t=i.parent_el,r=i.start_val,s=void 0===r?2:r,u=i.id,l=void 0===u?"incrementer":u,o=i.label,a=void 0===o?"my incrementer":o,c=i.on_increment,m=void 0===c?function(e){return console.log(e)}:c,p=n.make_el(t,"div#"+l+"_incrementer.plus-minus-input.settings-grid",{innerHTML:'<span class = "label">'+a+"</span>"}),v=n.make_el(p,"div.plus-minus-input-controls"),_=n.make_el(v,"button.plus-minus-input-btn.minus",{props:{name:"plus button"},innerHTML:e.minus_icon,event_listener:{event:"click",func:k(-1)}}),d=n.make_el(v,"span.plus-minus-input-value",{innerHTML:s.toString()});function b(e){d.innerHTML=e.toString(),1===e?_.classList.add("disabled"):_.classList.remove("disabled")}function k(e){return function(){var n=+d.innerHTML+e;b(n),m(n)}}return n.make_el(v,"button.plus-minus-input-btn.plus",{props:{name:"minus button"},innerHTML:e.plus_icon,event_listener:{event:"click",func:k(1)}}),b}exports.make_incrementer=i;
},{"./icons":"drsR","./make_el":"DCtb"}],"TB16":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.focused_modal=void 0;var e=require("./make_el");function r(r){var o=e.make_el(document.querySelector("body"),"div.background-blurrer",{event_listener:r.background_callbacks}),a=e.make_el(o,"div.modal",{event_listener:r.modal_callbacks});return r.header_text&&e.make_el(a,"div.modal_header",{innerHTML:r.header_text,styles:{paddingBottom:"1rem"}}),{background:o,modal:a,remove:function(){return o.remove()}}}exports.focused_modal=r;
},{"./make_el":"DCtb"}],"Tzqd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.make_css_unit_input=void 0;var e=require("./icons"),t=require("./make_el"),n=require("./misc-helpers");function i(i){var a=i.parent_el,r=i.selector,s=void 0===r?"":r,u=i.start_val,o=void 0===u?1:u,l=i.start_unit,c=void 0===l?"fr":l,v=i.on_change,d=void 0===v?function(e){return console.log("css unit change",e)}:v,_=i.allowed_units,p=void 0===_?["fr","px","rem"]:_,f=i.form_styles,g=void 0===f?{}:f,m=i.drag_dir,h=void 0===m?"none":m,k="none"!==h,b=t.make_el(a,"form"+s+".css-unit-input",{styles:g,event_listener:[{event:"change",func:function(){var e=M();q(e),d(e)}},{event:"submit",func:function(e){e.preventDefault()}}]}),x=t.make_el(b,"input.css-unit-input-value",{props:{type:"number",min:0,value:o,step:1,"aria-live":"polite"}}),y=t.make_el(b,"select.css-unit-input-select",{props:{name:"units"}}),L=t.make_el(b,"div.css-unit-input-dragger",{innerHTML:"y"===h?e.vertical_drag_icon:e.horizontal_drag_icon});function M(){return""+x.value+y.value}function q(e){x.value=n.get_css_value(e).toString();for(var t=n.get_css_unit(e),i=0,a=y.children;i<a.length;i++){var r=a[i];r.selected=r.value===t}"px"===t&&k?b.classList.add("with-drag"):b.classList.remove("with-drag")}return t.make_el(L,"div.css-unit-input-drag-detector",{props:{draggable:!0},event_listener:[{event:"dragstart",func:function(e){this.dataset.baseline=x.value,this.dataset.start=e[h]}},{event:"drag",func:function(e){if(0!==e[h]){var t=Math.max(0,+this.dataset.baseline+(e[h]-this.dataset.start));x.value=t.toString(),d(M())}}}]}),p.forEach(function(e){var n=t.make_el(y,"option."+e,{props:{value:e},innerHTML:e});e===c&&(n.selected=!0)}),q(""+o+c),{form:b,current_value:M,update_value:q}}exports.make_css_unit_input=i;
},{"./icons":"drsR","./make_el":"DCtb","./misc-helpers":"E1cz"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Shiny=void 0;var n=require("./make_el"),r=require("./draw_browser_header"),o=require("./make_incrementer"),i=require("./focused_modal"),a=require("./make_css_unit_input"),l=require("./misc-helpers"),s=require("./icons");exports.Shiny=window.Shiny,window.onload=function(){r.draw_browser_header();var d={rows:[],cols:[]},c=[],_=document.querySelector("#grid_holder"),u=document.querySelector("#settings .card-body"),m={num_rows:o.make_incrementer({parent_el:u,id:"num_rows",start_val:2,label:"Number of rows",on_increment:function(e){return p("rows",e)}}),num_cols:o.make_incrementer({parent_el:u,id:"num_cols",start_val:2,label:"Number of cols",on_increment:function(e){return p("cols",e)}}),gap:a.make_css_unit_input({parent_el:n.make_el(u,"div#gap_size_chooser.plus_minus_input.settings-grid",{innerHTML:'<span class = "label">Panel gap size</span>'}),selector:"#gap_size_chooser",on_change:function(e){return v({gap:e})},allowed_units:["px","rem"]})};function p(e,t){var n,r="rows"===e?k():x();t>r.length?r.push("1fr"):t<r.length&&r.pop(),v(((n={})[e]=r,n))}function f(e,t){var r=i.focused_modal({header_text:""+e,modal_callbacks:{event:"click",func:function(e){e.stopPropagation()}},background_callbacks:{event:"click",func:a}});l.as_array(t).forEach(function(e){var t,o=e.code.match(/\n/g).length,i=n.make_el(r.modal,"div#"+e.type+".code_chunk",{styles:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr, auto",gridGap:"4px",gridTemplateAreas:l.concat_nl('"code_type copy_btn"','"code_text code_text"')}});n.make_el(i,"strong",{innerHTML:e.type,styles:{gridArea:"code_type"}}),n.make_el(i,"button#copy_code",{innerHTML:"Copy to clipboard",styles:{gridArea:"copy_btn"},event_listener:{event:"click",func:function(){t.select(),document.execCommand("copy")}}}),t=n.make_el(i,"textarea#code_for_layout",{innerHTML:e.code,props:{rows:o+3},styles:{width:"100%",background:"#f3f2f2",fontFamily:"monospace",display:"block",padding:"0.75rem",marginBottom:"10px",borderRadius:"5px",gridArea:"code_text"}})});var o=n.make_el(r.modal,"div#action_buttons",{styles:{display:"flex",justifyContent:"space-around"}});function a(){r.remove()}n.make_el(o,"button#close_code_model",{innerHTML:"Close",event_listener:{event:"click",func:a}})}function g(){var e={rows:k(),cols:x()},r=e.rows.length,o=e.cols.length;if((c=[]).length!=r*o){n.remove_elements(_.querySelectorAll(".grid-cell"));for(var s=1;s<=r;s++)for(var u=1;u<=o;u++)c.push(n.make_el(_,"div.r"+s+".c"+u+".grid-cell",{data_props:{row:s,col:u},grid_pos:{start_row:s,start_col:u}}));var m=function(t){n.remove_elements(_.querySelectorAll("."+t+"-controls")),d[t]=e[t].map(function(e,n){var r,o=n+1;return a.make_css_unit_input({parent_el:_,selector:"#control_"+t+o+"."+t+"-controls",start_val:l.get_css_value(e),start_unit:l.get_css_unit(e),on_change:function(){return v(function(){var e={};for(var t in d)e[t]=d[t].map(function(e){return e.current_value()});return e}())},form_styles:(r={},r["grid"+("rows"===t?"Row":"Column")]=l.make_template_start_end(o),r),drag_dir:"rows"===t?"y":"x"})})};for(var p in d)m(p);var f=n.make_el(_,"div#current_selection_box.added-element"),g=n.make_el(_,"div#drag_canvas");y({watching_element:g,grid_element:f,drag_dir:l.Drag_Type.bottom_right,on_start:function(){f.style.borderColor=T()},on_end:function(e){!function(e){var t=e.grid_pos,r=e.selection_box,o=i.focused_modal({background_callbacks:{event:"click",func:d},modal_callbacks:{event:"click",func:function(e){e.stopPropagation()}}}),a=o.modal;n.make_el(a,"div.instructions",{innerHTML:"\n      <h2>Name your element:</h2>\n      <p>This name will be used to place items in your app.\n      For instance if you want to place a plot in this element,\n      this name will match the label of the plot output\n      </p>\n      "});var l=n.make_el(a,"form#name_form",{event_listener:{event:"submit",func:function(){var e=this.name_input.value.replace(/\s/g,"_"),n=!!w().find(function(t){return t.id===e});n?s("You already have an element with the id "+e+", all ids need to be unique."):e.match(/^[^a-zA-Z]/g)?s("Valid ids need to start with a character."):(h({id:e,color:r.style.borderColor,grid_pos:t}),d())}}});function s(e){n.make_el(a,"span#bad_id_msg.notice-text",{innerHTML:e,styles:{color:"orangered"}})}function d(){o.remove(),r.style.display="none"}n.make_el(l,"input#cancel_btn",{props:{type:"button",value:"cancel"},event_listener:{event:"click",func:d}}),n.make_el(l,"input#name_input",{props:{type:"text"},event_listener:{event:"input",func:function(){var e=a.querySelector("span#bad_id_msg");e&&e.remove()}}}).focus(),n.make_el(l,"input#name_submit",{props:{type:"submit"}})}({grid_pos:e.grid,selection_box:f})}}),t([g],_.querySelectorAll(".added-element")).forEach(function(e){return _.appendChild(e)})}}function v(e){var t=k().length,r=x().length,o=_.style.getPropertyValue("--grid-gap"),a=e.gap||o,s=e.rows?e.rows.length:t,d=e.cols?e.cols.length:r;m.num_rows(s),m.num_cols(d),m.gap.update_value(a);var c=t!==s||r!==d;if(c){var u=w(),p=[],f=[];if(u.forEach(function(e){var t=e.end_row>s||e.end_col>d;e.start_row>s||e.start_col>d?f.push(e.id):t&&p.push(e)}),S(f),p.length>0){var h=i.focused_modal({header_text:"\n        <h2>The following elements dont fit on the new grid layout.</h2>\n        <p>Below, choose to either remove the element or to shink its bounds to the new grid sizing</p>\n        "}),y=p.reduce(function(e,t){return"\n          "+e+'\n          <div class = "radio-set-group">\n            <div class = "radio-set-label"> '+t.id+' </div>\n            <div class = "radio-set-options">\n              <input type="radio" id = "delete_'+t.id+'" name="'+t.id+'" value="delete" checked>\n              <label for="delete_'+t.id+'">Delete</label>\n              <input type="radio" id = "shrink_'+t.id+'" name="'+t.id+'" value="shrink">\n              <label for="shrink_'+t.id+'">Shink</label>\n            </div>\n          </div>\n        '},""),b=n.make_el(h.modal,"form#delete_or_fix_list",{innerHTML:'<div class = "update-action-form"> '+y+" </div>",event_listener:{event:"submit",func:function(){var t=this;S(p.filter(function(e){return"delete"===t[e.id].value}).map(function(e){return e.id})),p.filter(function(e){return"shrink"===t[e.id].value}).forEach(function(e){var t=_.querySelector("#"+e.id);t.style.gridRow=l.make_template_start_end(e.start_row,Math.min(e.end_row,s)),t.style.gridColumn=l.make_template_start_end(e.start_col,Math.min(e.end_col,d))}),h.remove(),v({rows:e.rows,cols:e.cols,gap:e.gap})}}});return n.make_el(b,"input#name_submit",{props:{type:"submit"}}),void n.make_el(h.modal,"p.notice-text",{innerHTML:"Note that elements residing completely in the removed row or column are automatically deleted."})}}return e.rows&&(_.style.gridTemplateRows=l.sizes_to_template_def(e.rows)),e.cols&&(_.style.gridTemplateColumns=l.sizes_to_template_def(e.cols)),e.gap&&_.style.setProperty("--grid-gap",e.gap),c&&g(),exports.Shiny&&exports.Shiny.setInputValue("grid_sizing",{rows:_.style.gridTemplateRows.split(" "),cols:_.style.gridTemplateColumns.split(" "),gap:_.style.getPropertyValue("--grid-gap")}),_}function h(e){var t=e.id,r=e.color,o=void 0===r?T():r,i=e.grid_pos,a=n.make_el(_,"div#"+t+".el_"+t+".added-element",{grid_pos:i,styles:{borderColor:o,position:"relative"}});[l.Drag_Type.top_left,l.Drag_Type.bottom_right,l.Drag_Type.center].forEach(function(e){y({watching_element:n.make_el(a,"div.dragger.visible."+e,{styles:{background:o},innerHTML:"center"===e?s.drag_icon:e===l.Drag_Type.bottom_right?s.se_arrow:s.nw_arrow}),grid_element:a,drag_dir:e})});var d=n.make_el(document.querySelector("#added_elements"),"div.el_"+t+".added-element",{innerHTML:t,styles:{borderColor:o},event_listener:[{event:"mouseover",func:function(){this.classList.add("hovered"),a.classList.add("hovered")}},{event:"mouseout",func:function(){this.classList.remove("hovered"),a.classList.remove("hovered")}}]});n.make_el(d,"button.remove_el",{innerHTML:s.trashcan_icon,event_listener:{event:"click",func:function(){S(t)}}}),b()}function y(t){var r,o,i,a=document.querySelector("#editor");function s(e){var n=e;if(0!==n.x||0!==n.y){var a=l.update_rect_with_delta(o,{x:n.x-i.x,y:n.y-i.y},t.drag_dir);Object.assign(r.style,u(a));var s,d,_=(s=a,d={start_col:null,start_row:null},c.forEach(function(e){if(l.boxes_overlap(l.get_bounding_rect(e),s)){var t=+e.dataset.row,n=+e.dataset.col;d.start_row=l.min_w_missing(d.start_row,t),d.end_row=l.max_w_missing(d.end_row,t),d.start_col=l.min_w_missing(d.start_col,n),d.end_col=l.max_w_missing(d.end_col,n)}}),d);l.set_element_in_grid(t.grid_element,_),t.on_drag&&t.on_drag({xy:n,grid:_})}}function d(e){var n,l=e;r.remove(),o=null,i=null,t.on_end&&t.on_end({xy:l,grid:(n=t.grid_element||this.parentElement,{start_row:+n.style.gridRowStart,start_col:+n.style.gridColumnStart,end_row:+n.style.gridRowEnd-1,end_col:+n.style.gridColumnEnd-1})}),a.removeEventListener("mousemove",s),a.removeEventListener("mouseup",d)}function u(e){return{left:e.left+"px",top:e.top+"px",width:e.right-e.left+"px",height:e.bottom-e.top+"px"}}t.watching_element.onmousedown=function(c){i=c,_.appendChild(t.grid_element),o=l.get_bounding_rect(t.grid_element)||{left:c.offsetX,right:c.offsetX,top:c.offsetY,bottom:c.offsetY},r=n.make_el(_.querySelector("#drag_canvas"),"div.drag-feedback-rect",{styles:e({},u(o))}),t.on_start&&t.on_start(i),a.addEventListener("mousemove",s),a.addEventListener("mouseup",d)}}function w(){var e=[];return _.querySelectorAll(".added-element").forEach(function(t){if("current_selection_box"!==t.id){var n=t.style.gridArea.split(" / ");e.push({id:t.id,start_row:+n[0],start_col:+n[1],end_row:+n[2]-1,end_col:+n[3]-1})}}),e}function b(){if(exports.Shiny){var e={};w().forEach(function(t){e[t.id]=t}),exports.Shiny.setInputValue("elements",e)}}function k(){return _.style.gridTemplateRows.split(" ")}function x(){return _.style.gridTemplateColumns.split(" ")}function T(){var e=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"];return e[_.querySelectorAll(".added-element").length%e.length]}function S(e){l.as_array(e).forEach(function(e){n.remove_elements(document.querySelectorAll("div.el_"+e+".added-element"))}),b()}exports.Shiny?(exports.Shiny.addCustomMessageHandler("update-grid",function(e){v(e)}),exports.Shiny.addCustomMessageHandler("add-elements",function(e){e.forEach(function(e){h({id:e.id,grid_pos:e})})}),exports.Shiny.addCustomMessageHandler("code_modal",function(e){f("Paste the following code into your app to update the layout",{type:"R",code:e})})):(v({rows:["1fr","1fr"],cols:["1fr","1fr"],gap:"1rem"}),document.getElementById("get_code").addEventListener("click",function(){var e,n,r,o;f("Place the following in your CSS:",(e=w(),n=e.map(function(e){return l.concat_nl("#"+e.id+" {","  grid-column: "+l.make_template_start_end(e.start_col,e.end_col)+";","  grid-row: "+l.make_template_start_end(e.start_row,e.end_row)+";","}")}),r=l.concat_nl.apply(void 0,t(["#container {","  display: grid;","  grid-template-columns: "+_.style.gridTemplateColumns+";","  grid-template-rows: "+_.style.gridTemplateRows+";","  grid-gap: "+_.style.getPropertyValue("--grid-gap"),"}"],n)),o=l.concat_nl.apply(void 0,t(t(["<div id = #container>"],e.map(function(e){return l.concat_nl('  <div id = "#'+e.id+'">',"  </div>")})),["</div>"])),[{type:"css",code:r},{type:"html",code:o}]))}))},window.onresize=function(){r.draw_browser_header()};
},{"./make_el":"DCtb","./draw_browser_header":"kHB8","./make_incrementer":"qudk","./focused_modal":"TB16","./make_css_unit_input":"Tzqd","./misc-helpers":"E1cz","./icons":"drsR"}]},{},["QCba"], null)