parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"E1cz":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function e(t,e){return t+" / "+(e=e?e+1:t+(t<0?-1:1))}function r(t,e,r){e.start_row&&(t.style.gridRowStart=e.start_row.toString()),e.end_row&&(t.style.gridRowEnd=(e.end_row+1).toString()),e.start_col&&(t.style.gridColumnStart=e.start_col.toString()),e.end_col&&(t.style.gridColumnEnd=(e.end_col+1).toString()),t.style.display="block"}function o(t){return n(t," ")}function n(t,e){return void 0===e&&(e=" "),t.reduce(function(t,r,o){return t+(o>0?e:"")+r},"")}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(t,"\n")}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(t," ")}function _(t){return t instanceof Array?t:[t]}function a(t,e,r){return e?t(e,r):r}function p(t,e){return a(Math.min,t,e)}function c(t,e){return a(Math.max,t,e)}function u(t){if(null===t.offsetParent)return null;var e=t.offsetTop,r=t.offsetLeft,o=t.offsetHeight;return{left:r,right:r+t.offsetWidth,top:e,bottom:e+o}}function f(t,e){var r=n([t.left,t.right],[e.left,e.right]),o=n([t.top,t.bottom],[e.top,e.bottom]);return r&&o;function n(t,e){var r=t[0],o=t[1],n=e[0],s=e[1];return r>=n&&r<=s||o>=n&&o<=s||r<=n&&o>=s}}function l(e,r,o){var n=t({},e);if("top-left"===o?(n.left=n.left+r.x,n.top=n.top+r.y):"bottom-right"===o?(n.right=n.right+r.x,n.left,n.bottom=n.bottom+r.y,n.top):(n.left+=r.x,n.top+=r.y,n.right+=r.x,n.bottom+=r.y),n.left>n.right){var s=n.left,i=n.right;n.right=s,n.left=i}if(n.top>n.bottom){var _=n.top,a=n.bottom;n.bottom=_,n.top=a}return n}function g(t){return t.match(/[^ \d | \.]+$/g)[0]||"px"}function x(t){return Number(t.match(/^[\d | \.]+/g)[0])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.get_css_value=exports.get_css_unit=exports.update_rect_with_delta=exports.boxes_overlap=exports.get_bounding_rect=exports.max_w_missing=exports.min_w_missing=exports.compare_w_missing=exports.as_array=exports.concat_sp=exports.concat_nl=exports.concat=exports.sizes_to_template_def=exports.set_element_in_grid=exports.make_template_start_end=void 0,exports.make_template_start_end=e,exports.set_element_in_grid=r,exports.sizes_to_template_def=o,exports.concat=n,exports.concat_nl=s,exports.concat_sp=i,exports.as_array=_,exports.compare_w_missing=a,exports.min_w_missing=p,exports.max_w_missing=c,exports.get_bounding_rect=u,exports.boxes_overlap=f,exports.update_rect_with_delta=l,exports.get_css_unit=g,exports.get_css_value=x;
},{}],"DCtb":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArray||function(e,r){for(var t=0,n=r.length,s=e.length;t<n;t++,s++)e[s]=r[t];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.remove_elements=exports.make_el=void 0;var r=require("./misc-helpers");function t(e){var r=e.match(/#([^\.]+)/g);return r?r[0].replace("#",""):null}function n(r){var t=r.match(/\.([^\.#]+)/g);return t?e([],t).map(function(e){return e.replace(".","")}):null}function s(e,s,a){void 0===a&&(a={});var o=s.match(/^([^#\.]+)+/g)[0],i=t(s),c=n(s),u=e.querySelector(s);return u||(u=document.createElement(o),i&&(u.id=i),c&&c.forEach(function(e){return u.classList.add(e)}),a.props&&Object.assign(u,a.props),e.appendChild(u)),a.event_listener&&r.as_array(a.event_listener).forEach(function(e){return u["on"+e.event]=e.func}),a.styles&&Object.assign(u.style,a.styles),a.innerHTML&&(u.innerHTML=a.innerHTML),a.data_props&&Object.assign(u.dataset,a.data_props),a.grid_pos&&r.set_element_in_grid(u,a.grid_pos),u}function a(e){e.forEach(function(e){return e.remove()})}exports.make_el=s,exports.remove_elements=a;
},{"./misc-helpers":"E1cz"}],"drsR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minus_icon=exports.plus_icon=exports.drag_icon=exports.top_left_arrow=exports.nw_arrow=exports.se_arrow=exports.bottom_right_arrow=exports.trashcan_icon=exports.horizontal_drag_icon=exports.vertical_drag_icon=void 0,exports.vertical_drag_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M21 11H3V9H21V11M21 13H3V15H21V13Z" />\n</svg>',exports.horizontal_drag_icon='<svg style="width:24px;height:24px;max-height:100%;" viewBox="0 0 24 24">\n<path fill="currentColor" d="M11 21H9V3H11V21M15 3H13V21H15V3Z" />\n</svg>',exports.trashcan_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />\n</svg>',exports.bottom_right_arrow='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M5,6.41L6.41,5L17,15.59V9H19V19H9V17H15.59L5,6.41Z" />\n</svg>',exports.se_arrow='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M5,6.41L6.41,5L17,15.59V9H19V19H9V17H15.59L5,6.41Z" />\n</svg>',exports.nw_arrow='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M19,17.59L17.59,19L7,8.41V15H5V5H15V7H8.41L19,17.59Z" />\n</svg>',exports.top_left_arrow='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M5,6.41L6.41,5L17,15.59V9H19V19H9V17H15.59L5,6.41Z" />\n</svg>',exports.drag_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z" />\n</svg>',exports.plus_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />\n</svg>',exports.minus_icon='<svg style="width:24px;height:24px" viewBox="0 0 24 24">\n<path fill="currentColor" d="M19,13H5V11H19V13Z" />\n</svg>';
},{}],"qudk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.make_incrementer=void 0;var e=require("./icons"),n=require("./make_el");function i(i){var t=i.parent_el,r=i.start_val,s=void 0===r?2:r,u=i.id,l=void 0===u?"incrementer":u,o=i.label,a=void 0===o?"my incrementer":o,c=i.on_increment,m=void 0===c?function(e){return console.log(e)}:c,p=n.make_el(t,"div#"+l+"_incrementer.plus-minus-input.settings-grid",{innerHTML:'<span class = "label">'+a+"</span>"}),v=n.make_el(p,"div.plus-minus-input-controls"),_=n.make_el(v,"button.plus-minus-input-btn.minus",{props:{name:"plus button"},innerHTML:e.minus_icon,event_listener:{event:"click",func:k(-1)}}),d=n.make_el(v,"span.plus-minus-input-value",{innerHTML:s.toString()});function b(e){d.innerHTML=e.toString(),1===e?_.classList.add("disabled"):_.classList.remove("disabled")}function k(e){return function(){var n=+d.innerHTML+e;b(n),m(n)}}return n.make_el(v,"button.plus-minus-input-btn.plus",{props:{name:"minus button"},innerHTML:e.plus_icon,event_listener:{event:"click",func:k(1)}}),b}exports.make_incrementer=i;
},{"./icons":"drsR","./make_el":"DCtb"}],"TB16":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.focused_modal=void 0;var e=require("./make_el");function r(r){var o=e.make_el(document.querySelector("body"),"div.background-blurrer",{event_listener:r.background_callbacks}),a=e.make_el(o,"div.modal",{event_listener:r.modal_callbacks});return r.header_text&&e.make_el(a,"div.modal_header",{innerHTML:r.header_text,styles:{paddingBottom:"1rem"}}),{background:o,modal:a,remove:function(){return o.remove()}}}exports.focused_modal=r;
},{"./make_el":"DCtb"}],"Tzqd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.make_css_unit_input=void 0;var e=require("./icons"),t=require("./make_el"),n=require("./misc-helpers");function i(i){var a=i.parent_el,r=i.selector,s=void 0===r?"":r,u=i.start_val,o=void 0===u?1:u,l=i.start_unit,c=void 0===l?"fr":l,v=i.on_change,d=void 0===v?function(e){return console.log("css unit change",e)}:v,_=i.allowed_units,p=void 0===_?["fr","px","rem"]:_,f=i.form_styles,g=void 0===f?{}:f,m=i.drag_dir,h=void 0===m?"none":m,k="none"!==h,b=t.make_el(a,"form"+s+".css-unit-input",{styles:g,event_listener:[{event:"change",func:function(){var e=M();q(e),d(e)}},{event:"submit",func:function(e){e.preventDefault()}}]}),x=t.make_el(b,"input.css-unit-input-value",{props:{type:"number",min:0,value:o,step:1,"aria-live":"polite"}}),y=t.make_el(b,"select.css-unit-input-select",{props:{name:"units"}}),L=t.make_el(b,"div.css-unit-input-dragger",{innerHTML:"y"===h?e.vertical_drag_icon:e.horizontal_drag_icon});function M(){return""+x.value+y.value}function q(e){x.value=n.get_css_value(e).toString();for(var t=n.get_css_unit(e),i=0,a=y.children;i<a.length;i++){var r=a[i];r.selected=r.value===t}"px"===t&&k?b.classList.add("with-drag"):b.classList.remove("with-drag")}return t.make_el(L,"div.css-unit-input-drag-detector",{props:{draggable:!0},event_listener:[{event:"dragstart",func:function(e){this.dataset.baseline=x.value,this.dataset.start=e[h]}},{event:"drag",func:function(e){if(0!==e[h]){var t=Math.max(0,+this.dataset.baseline+(e[h]-this.dataset.start));x.value=t.toString(),d(M())}}}]}),p.forEach(function(e){var n=t.make_el(y,"option."+e,{props:{value:e},innerHTML:e});e===c&&(n.selected=!0)}),q(""+o+c),{form:b,current_value:M,update_value:q}}exports.make_css_unit_input=i;
},{"./icons":"drsR","./make_el":"DCtb","./misc-helpers":"E1cz"}],"bEf5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.make_toggle_switch=void 0;var e=require("./make_el");function n(n,t,i,r){var s=e.make_el(n,"div.toggle-switch");e.make_el(s,"span.off-text",{innerHTML:t});var o=e.make_el(s,"label.switch");e.make_el(s,"span.on-text",{innerHTML:i}),e.make_el(o,"input",{props:{type:"checkbox"},event_listener:{event:"change",func:function(e){r(e.target.checked)}}}),e.make_el(o,"span.slider");var l=document.styleSheets[0];l.insertRule("\n    div.toggle-switch {\n      display: inline-grid;\n      grid-template-columns: 1fr auto 1fr;\n      grid-gap: 3px;\n      width: 180px;\n      align-items: center;\n      justify-items: center;\n    }\n  "),l.insertRule("\n  .toggle-switch > span {\n    font-size: 0.85rem;\n  }\n"),l.insertRule("\n    .toggle-switch > .off-text {\n      text-align: end;\n    }\n  "),l.insertRule(".switch {\n    position: relative;\n    display: inline-block;\n    width: 60px;\n    height: 34px;\n  }",0),l.insertRule(".switch input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }",0),l.insertRule(".slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border-radius: 34px;\n    background-color: #ccc;\n    -webkit-transition: .4s;\n    transition: .4s;\n  }",0),l.insertRule('.slider:before {\n    position: absolute;\n    content: "";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    border-radius: 50%;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n  }',0),l.insertRule("input:checked + .slider {\n    background-color: #2196F3;\n  }",0),l.insertRule("input:focus + .slider {\n    box-shadow: 0 0 1px #2196F3;\n  }",0),l.insertRule("input:checked + .slider:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }",0)}exports.make_toggle_switch=n;
},{"./make_el":"DCtb"}],"zMkP":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,s=e.length;r<n;r++,s++)e[s]=t[r];return e};function t(t,r){var n=function(e){return function(t){return t.selectorText===e}},s=e([],document.styleSheets),u=s.filter(function(r){return e([],r.rules).find(n(t))}).map(function(r){return e([],r.cssRules).find(n(t)).style}).filter(function(e){return!r||e[r]}),i=u.length;if(0===i){var l=s[s.length-1];return l.insertRule(t+" { }",0),e([],l.cssRules).find(n(t)).style}return u[i-1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.find_rules_by_selector=void 0,exports.find_rules_by_selector=t;
},{}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Shiny=void 0;var n=require("./make_el"),r=require("./make_incrementer"),o=require("./focused_modal"),i=require("./make_css_unit_input"),a=require("./misc-helpers"),l=require("./make_toggle_switch"),s=require("./icons"),d=require("./find_rules_by_selector");function c(e){return e.gap.split(" ")[0]}function u(e,t){return e.gap=t,t}exports.Shiny=window.Shiny,window.onload=function(){var _={rows:[],cols:[]},m=[],p=document.querySelector("#grid_page"),g=document.querySelector("#settings .card-body"),f={num_rows:r.make_incrementer({parent_el:g,id:"num_rows",start_val:2,label:"Number of rows",on_increment:function(e){return v("rows",e)}}),num_cols:r.make_incrementer({parent_el:g,id:"num_cols",start_val:2,label:"Number of cols",on_increment:function(e){return v("cols",e)}}),gap:i.make_css_unit_input({parent_el:n.make_el(g,"div#gap_size_chooser.plus_minus_input.settings-grid",{innerHTML:'<span class = "label">Panel gap size</span>'}),selector:"#gap_size_chooser",on_change:function(e){return q({gap:e})},allowed_units:["px","rem"]})};function v(e,t){var n,r="rows"===e?z():P();t>r.length?r.push("1fr"):t<r.length&&r.pop(),q(((n={})[e]=r,n))}var h=p.hasChildNodes()?"ShinyExisting":exports.Shiny?"ShinyNew":"ClientSide",y=d.find_rules_by_selector("#grid_page","gridTemplateColumns");function w(e,t){var n;null===(n=exports.Shiny.setInputValue)||void 0===n||n.call(exports.Shiny,e,t)}if(y.height="100%",y.width="100%","ShinyExisting"!==h&&(y.display="grid",u(y,"1rem"),y.padding="1rem"),A("shiny-loaded",function(e){console.log("connected to shiny"),H(),R()}),"ShinyExisting"===h){var b=y.gridTemplateRows.split(" "),k=y.gridTemplateColumns.split(" "),x=c(y);t([],p.children).forEach(function(e){E({id:e.id,grid_pos:C(e),existing_element:e})}),q({rows:b,cols:k,gap:x,force:!0}),d.find_rules_by_selector(".grid-cell").background="none",l.make_toggle_switch(document.querySelector("#header .code_btns"),"Edit layout","Interact mode",function(e){var t=function(t){e?t.classList.add("disabled"):t.classList.remove("disabled")};document.querySelectorAll("#grid_page .added-element").forEach(t),document.querySelectorAll(".grid-cell").forEach(t),t(document.querySelector("#added_elements")),t(document.querySelector("#drag_canvas"))})}else"ShinyNew"===h?(A("update-grid",q),A("add-elements",function(e){e.forEach(function(e){E({id:e.id,grid_pos:e})})})):(q({rows:["1fr","1fr"],cols:["1fr","1fr"],gap:"1rem"}),document.getElementById("get_code").addEventListener("click",function(){var e,n,r,o;S("Place the following in your CSS:",(e=M(),n=e.map(function(e){return a.concat_nl("#"+e.id+" {","  grid-column: "+a.make_template_start_end(e.start_col,e.end_col)+";","  grid-row: "+a.make_template_start_end(e.start_row,e.end_row)+";","}")}),r=a.concat_nl.apply(void 0,t(["#container {","  display: grid;","  grid-template-columns: "+y.gridTemplateColumns+";","  grid-template-rows: "+y.gridTemplateRows+";","  gap: "+c(y),"}"],n)),o=a.concat_nl.apply(void 0,t(t(["<div id = #container>"],e.map(function(e){return a.concat_nl('  <div id = "#'+e.id+'">',"  </div>")})),["</div>"])),[{type:"css",code:r},{type:"html",code:o}]))}));function S(e,t){var r=o.focused_modal({header_text:""+e,modal_callbacks:{event:"click",func:function(e){e.stopPropagation()}},background_callbacks:{event:"click",func:l}});a.as_array(t).forEach(function(e){var t,o=e.code.match(/\n/g).length,i=n.make_el(r.modal,"div#"+e.type+".code_chunk",{styles:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"1fr, auto",gap:"4px",gridTemplateAreas:a.concat_nl('"code_type copy_btn"','"code_text code_text"')}});n.make_el(i,"strong",{innerHTML:e.type,styles:{gridArea:"code_type"}}),n.make_el(i,"button#copy_code",{innerHTML:"Copy to clipboard",styles:{gridArea:"copy_btn"},event_listener:{event:"click",func:function(){t.select(),document.execCommand("copy")}}}),t=n.make_el(i,"textarea#code_for_layout",{innerHTML:e.code,props:{rows:o+3},styles:{width:"100%",background:"#f3f2f2",fontFamily:"monospace",display:"block",padding:"0.75rem",marginBottom:"10px",borderRadius:"5px",gridArea:"code_text"}})});var i=n.make_el(r.modal,"div#action_buttons",{styles:{display:"flex",justifyContent:"space-around"}});function l(){r.remove()}n.make_el(i,"button#close_code_model",{innerHTML:"Close",event_listener:{event:"click",func:l}})}function T(){var e={rows:z(),cols:P()},r=e.rows.length,l=e.cols.length;if((m=[]).length!=r*l){n.remove_elements(p.querySelectorAll(".grid-cell"));for(var s=1;s<=r;s++)for(var d=1;d<=l;d++)m.push(n.make_el(p,"div.r"+s+".c"+d+".grid-cell",{data_props:{row:s,col:d},grid_pos:{start_row:s,start_col:d}}));var c=function(t){n.remove_elements(p.querySelectorAll("."+t+"-controls")),_[t]=e[t].map(function(e,n){var r,o=n+1;return i.make_css_unit_input({parent_el:p,selector:"#control_"+t+o+"."+t+"-controls",start_val:a.get_css_value(e),start_unit:a.get_css_unit(e),on_change:function(){return q(function(){var e={};for(var t in _)e[t]=_[t].map(function(e){return e.current_value()});return e}())},form_styles:(r={},r["grid"+("rows"===t?"Row":"Column")]=a.make_template_start_end(o),r),drag_dir:"rows"===t?"y":"x"})})};for(var u in _)c(u);var g=n.make_el(p,"div#current_selection_box.added-element"),f=n.make_el(p,"div#drag_canvas");L({watching_element:f,grid_element:g,drag_dir:"bottom-right",on_start:function(){g.style.borderColor=N()},on_end:function(e){!function(e){var t=e.grid_pos,r=e.selection_box,i=o.focused_modal({background_callbacks:{event:"click",func:d},modal_callbacks:{event:"click",func:function(e){e.stopPropagation()}}}),a=i.modal;n.make_el(a,"div.instructions",{innerHTML:"\n      <h2>Name your element:</h2>\n      <p>This name will be used to place items in your app.\n      For instance if you want to place a plot in this element,\n      this name will match the label of the plot output\n      </p>\n      "});var l=n.make_el(a,"form#name_form",{event_listener:{event:"submit",func:function(e){e.preventDefault();var n=this.name_input.value.replace(/\s/g,"_"),o=!!M().find(function(e){return e.id===n});o?s("You already have an element with the id "+n+", all ids need to be unique."):n.match(/^[^a-zA-Z]/g)?s("Valid ids need to start with a character."):(E({id:n,color:r.style.borderColor,grid_pos:t}),d())}}});function s(e){n.make_el(a,"span#bad_id_msg.notice-text",{innerHTML:e,styles:{color:"orangered"}})}function d(){i.remove(),r.style.display="none"}n.make_el(l,"input#cancel_btn",{props:{type:"button",value:"cancel"},event_listener:{event:"click",func:d}}),n.make_el(l,"input#name_input",{props:{type:"text"},event_listener:{event:"input",func:function(){var e=a.querySelector("span#bad_id_msg");e&&e.remove()}}}).focus(),n.make_el(l,"input#name_submit",{props:{type:"submit"}})}({grid_pos:e.grid,selection_box:g})}}),t([f],p.querySelectorAll(".added-element")).forEach(function(e){return p.appendChild(e)})}}function q(e){var t=z().length,r=P().length,i=c(y),l=e.gap||i,s=e.rows?e.rows.length:t,d=e.cols?e.cols.length:r;f.num_rows(s),f.num_cols(d),f.gap.update_value(l);var _=t!==s||r!==d;if(_){var m=M(),g=[],v=[];if(m.forEach(function(e){var t=e.end_row>s||e.end_col>d;e.start_row>s||e.start_col>d?v.push(e.id):t&&g.push(e)}),j(v),g.length>0){var h=o.focused_modal({header_text:"\n        <h2>The following elements dont fit on the new grid layout.</h2>\n        <p>Below, choose to either remove the element or to shink its bounds to the new grid sizing</p>\n        "}),w=g.reduce(function(e,t){return"\n          "+e+'\n          <div class = "radio-set-group">\n            <div class = "radio-set-label"> '+t.id+' </div>\n            <div class = "radio-set-options">\n              <input type="radio" id = "delete_'+t.id+'" name="'+t.id+'" value="delete" checked>\n              <label for="delete_'+t.id+'">Delete</label>\n              <input type="radio" id = "shrink_'+t.id+'" name="'+t.id+'" value="shrink">\n              <label for="shrink_'+t.id+'">Shink</label>\n            </div>\n          </div>\n        '},""),b=n.make_el(h.modal,"form#delete_or_fix_list",{innerHTML:'<div class = "update-action-form"> '+w+" </div>",event_listener:{event:"submit",func:function(){var t=this;j(g.filter(function(e){return"delete"===t[e.id].value}).map(function(e){return e.id})),g.filter(function(e){return"shrink"===t[e.id].value}).forEach(function(e){var t=p.querySelector("#"+e.id);t.style.gridRow=a.make_template_start_end(e.start_row,Math.min(e.end_row,s)),t.style.gridColumn=a.make_template_start_end(e.start_col,Math.min(e.end_col,d))}),h.remove(),q({rows:e.rows,cols:e.cols,gap:e.gap})}}});return n.make_el(b,"input#name_submit",{props:{type:"submit"}}),void n.make_el(h.modal,"p.notice-text",{innerHTML:"Note that elements residing completely in the removed row or column are automatically deleted."})}}return e.rows&&(y.gridTemplateRows=a.sizes_to_template_def(e.rows)),e.cols&&(y.gridTemplateColumns=a.sizes_to_template_def(e.cols)),e.gap&&(p.parentElement.style.setProperty("--grid-gap",e.gap),u(y,e.gap),y.padding=e.gap),(_||e.force)&&T(),R(),p}function E(e){var t=e.grid_pos,r=e.color,o=void 0===r?N():r,i=e.existing_element,l=void 0!==i,d=l?e.id.replace(/^.+?__/g,""):e.id,c=n.make_el(p,"div#"+d+".el_"+d+".added-element",{grid_pos:t,styles:{borderColor:o,position:"relative"}});["top-left","bottom-right","center"].forEach(function(e){L({watching_element:n.make_el(c,"div.dragger.visible."+e,{styles:{background:o},innerHTML:"center"===e?s.drag_icon:"bottom-right"===e?s.se_arrow:s.nw_arrow}),grid_element:c,drag_dir:e,on_drag:function(e){l&&a.set_element_in_grid(i,e.grid)},on_end:function(){H()}})});var u=n.make_el(document.querySelector("#added_elements"),"div.el_"+d+".added-element",{innerHTML:d,styles:{borderColor:o},event_listener:[{event:"mouseover",func:function(){this.classList.add("hovered"),c.classList.add("hovered")}},{event:"mouseout",func:function(){this.classList.remove("hovered"),c.classList.remove("hovered")}}]});l||n.make_el(u,"button.remove_el",{innerHTML:s.trashcan_icon,event_listener:{event:"click",func:function(){j(d)}}}),H()}function C(e){var t=getComputedStyle(e);return{start_row:+t.gridRowStart,start_col:+t.gridColumnStart,end_row:+t.gridRowEnd-1,end_col:+t.gridColumnEnd-1}}function L(t){var r,o,i,l=document.querySelector("#editor");function s(e,t){var n,r,o=(n=t,r={start_col:null,start_row:null},m.forEach(function(e){if(a.boxes_overlap(a.get_bounding_rect(e),n)){var t=+e.dataset.row,o=+e.dataset.col;r.start_row=a.min_w_missing(r.start_row,t),r.end_row=a.max_w_missing(r.end_row,t),r.start_col=a.min_w_missing(r.start_col,o),r.end_col=a.max_w_missing(r.end_col,o)}}),r);return a.set_element_in_grid(e,o),o}function d(e){var n=e;if(0!==n.x||0!==n.y){var l=a.update_rect_with_delta(o,{x:n.x-i.x,y:n.y-i.y},t.drag_dir);Object.assign(r.style,u(l));var d=s(t.grid_element,l);t.on_drag&&t.on_drag({xy:n,grid:d})}}function c(e){var n=e;r.remove(),o=null,i=null,t.on_end&&t.on_end({xy:n,grid:C(t.grid_element||this.parentElement)}),l.removeEventListener("mousemove",d),l.removeEventListener("mouseup",c)}function u(e){return{left:e.left+"px",top:e.top+"px",width:e.right-e.left+"px",height:e.bottom-e.top+"px"}}t.watching_element.onmousedown=function(_){i=_,p.appendChild(t.grid_element),o=a.get_bounding_rect(t.grid_element)||{left:_.offsetX,right:_.offsetX,top:_.offsetY,bottom:_.offsetY},r=n.make_el(p.querySelector("#drag_canvas"),"div.drag-feedback-rect",{styles:e({},u(o))}),s(t.grid_element,o),t.on_start&&t.on_start(i),l.addEventListener("mousemove",d),l.addEventListener("mouseup",c)}}function M(){var e=[];return p.querySelectorAll(".added-element").forEach(function(t){if("current_selection_box"!==t.id){var n=t.style.gridArea.split(" / ");e.push({id:t.id,start_row:+n[0],start_col:+n[1],end_row:+n[2]-1,end_col:+n[3]-1})}}),e}function A(e,t){null===exports.Shiny||void 0===exports.Shiny||exports.Shiny.addCustomMessageHandler(e,t)}function H(){var e={};M().forEach(function(t){e[t.id]=t}),w("elements",e)}function R(){w("grid_sizing",{rows:y.gridTemplateRows.split(" "),cols:y.gridTemplateColumns.split(" "),gap:c(y)})}function z(){return y.gridTemplateRows.split(" ")}function P(){return y.gridTemplateColumns.split(" ")}function N(){var e=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#a65628","#f781bf"];return e[p.querySelectorAll(".added-element").length%e.length]}function j(e){a.as_array(e).forEach(function(e){n.remove_elements(document.querySelectorAll("div.el_"+e+".added-element"))}),H()}A("code_modal",function(e){S("Paste the following code into your app to update the layout",{type:"R",code:e})})};
},{"./make_el":"DCtb","./make_incrementer":"qudk","./focused_modal":"TB16","./make_css_unit_input":"Tzqd","./misc-helpers":"E1cz","./make_toggle_switch":"bEf5","./icons":"drsR","./find_rules_by_selector":"zMkP"}]},{},["QCba"], null)